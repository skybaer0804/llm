# 13. Aider 에이전트 설치 및 연동 가이드

본 가이드는 **Aider**를 노트북(클라이언트)에 설치하여 맥미니(서버)의 Ollama를 강력한 코딩 에이전트로 활용하는 방법을 설명합니다.

Aider는 단순한 자동 완성을 넘어 Git과 연동되어 '테스트-수정' 루프를 자율적으로 수행하며, 복잡한 코드 수정 작업에서 매우 높은 성능을 보여줍니다.

---

## 1. Aider 설치 (노트북)

노트북 터미널에서 아래 명령어로 Aider를 설치합니다.

```bash
pip install aider-chat
```

---

## 2. 외부 맥미니 Ollama 연결 및 실행

노트북 터미널에서 작업하려는 프로젝트 폴더로 이동한 뒤, 아래 명령어를 통해 맥미니의 Ollama와 연결합니다.

### 방법 A: 일회성 실행 (추천)
맥미니의 IP가 `192.168.0.10`이라고 가정할 때의 명령어입니다.

```bash
# 1. Ollama 원격 주소 설정 (맥미니 IP 입력)
export OLLAMA_HOST=http://192.168.0.10:11434

# 2. Aider 실행 (Architect 모드로 지능 극대화)
aider --model ollama_chat/qwen3-coder-next \
      --architect \
      --no-show-model-warnings
```

- **`ollama_chat/` 접두사**: Aider에서 Ollama를 쓸 때 가장 안정적인 연결 방식입니다.
- **`--architect`**: 모델이 코드를 바로 수정하지 않고, 먼저 '수정 계획'을 세우게 강제합니다. 이 모드를 사용해야 벤치마크급 지능이 발휘됩니다.

### 방법 B: 설정 파일 저장 (.env)
매번 입력하기 번거롭다면 프로젝트 루트에 `.env` 파일을 만드세요.

```plaintext
OLLAMA_HOST=http://[맥미니IP]:11434
```

설정 후에는 단순히 아래 명령어로 실행 가능합니다.
```bash
aider --model ollama_chat/qwen3-coder-next --architect
```

---

## 3. Continue vs Aider 병행 전략

두 도구는 역할이 다르므로 상황에 맞게 교차 활용하는 것이 가장 효율적입니다.

| 도구 | 주요 용도 | 권장 사용 시점 |
| :--- | :--- | :--- |
| **Cursor + Continue** | 코드 탐색 및 소규모 수정 | 코드 구조 질문, 함수 하나 작성, 간단한 리팩토링 |
| **Aider (Terminal)** | 복잡한 버그 해결 및 에이전트 작업 | "전체 로직 변경", "테스트 통과할 때까지 자율 수정" |

---

## 💡 에이전트 성능 100% 활용 팁 (Self-Correction)

Aider 실행 후 모델에게 다음과 같이 지시하여 자율 수동 루프를 가동하세요.

> **"지금부터 코드를 수정한 뒤에는 반드시 pytest를 실행하고, 에러가 나면 스스로 다시 수정해."**

이렇게 하면 모델이 스스로 **[코드 수정 -> 에러 발생 -> 에러 로그 분석 -> 재수정]** 루프를 돌며, 수동으로 고치는 것보다 훨씬 높은 확률로 완벽한 결과를 만들어냅니다.

---

## ⚠️ 컨텍스트 윈도우 확장 필수

맥미니의 Ollama는 기본 컨텍스트가 2048(2k)로 매우 작습니다. 프로젝트 전체 맥락을 파악하려면 반드시 32k 이상으로 확장해야 합니다.

상세 설정 방법은 **[11. Ollama Modelfile 최적화 가이드](../03_AutoGen_Agents/11_Ollama_Modelfile_최적화_가이드.md)** 문서를 참고하세요.
