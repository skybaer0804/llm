# 04-1. Open WebUI RAG ë° ì§€ì‹ ìì‚°í™”

Open WebUIëŠ” ë‹¨ìˆœí•œ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ë¥¼ ë„˜ì–´, ê°•ë ¥í•œ ë¡œì»¬ RAG(Retrieval-Augmented Generation) ì‹œìŠ¤í…œì„ ë‚´ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë³„ë„ì˜ ë„êµ¬ ì—†ì´ë„ ë¬¸ì„œë¥¼ í•™ìŠµì‹œí‚¤ê³  ì§€ì‹ ìì‚°í™”í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

---

## 1. Open WebUIì˜ ë¡œì»¬ ë²¡í„° ì €ì¥ ë°©ì‹

Open WebUIë„ AnythingLLMê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë‚´ë¶€ì— ë…ë¦½ì ì¸ RAG ì‹œìŠ¤í…œì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤.

*   **ì €ì¥ ë°©ì‹**: ë¬¸ì„œë¥¼ ì—…ë¡œë“œí•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ ë²¡í„° ë°ì´í„°(Embedding)ë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥í•©ë‹ˆë‹¤. Docker í™˜ê²½ì—ì„œëŠ” Docker ë³¼ë¥¨ ë‚´ì˜ ì „ìš© ë°ì´í„°ë² ì´ìŠ¤(ChromaDB ë“±)ì— ì•ˆì „í•˜ê²Œ ë³´ê´€ë©ë‹ˆë‹¤.
*   **ì§ê´€ì ì¸ ì‚¬ìš©ë²•**: ì±„íŒ…ì°½ì— íŒŒì¼ì„ ë“œë˜ê·¸ ì•¤ ë“œë¡­í•˜ê±°ë‚˜, ì±„íŒ… ì…ë ¥ë€ì—ì„œ `#` ê¸°í˜¸ë¥¼ ì…ë ¥í•˜ì—¬ íŠ¹ì • ë¬¸ì„œë¥¼ ì¦‰ì‹œ ì†Œí™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 2. Open WebUI vs AnythingLLM ë¹„êµ

| ë¹„êµ í•­ëª© | Open WebUI (ë©”ì¸ ë³¸ë¶€) | AnythingLLM (ë³´ì¡° ë°±ê³¼ì‚¬ì „) |
| :--- | :--- | :--- |
| **ì£¼ìš” ëª©ì ** | ë‹¤ì–‘í•œ LLM êµì²´, í˜ë¥´ì†Œë‚˜ ì„¤ì •, íŒ€ ì±„íŒ… | ë°©ëŒ€í•œ ë¬¸ì„œ ê´€ë¦¬, ì‹¬ì¸µ ì§€ì‹ ìì‚°í™” |
| **RAG ë°©ì‹** | ì±„íŒ… ì‹œ ì‹¤ì‹œê°„ ì°¸ì¡° (ê°€ë²¼ìš´ RAG) | ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë³„ ì˜êµ¬ í•™ìŠµ (ì‹¬ì¸µ RAG) |
| **ë™ê¸°í™”** | ìˆ˜ë™ ì—…ë¡œë“œ ìœ„ì£¼ (API ì»¤ìŠ¤í…€ ê°€ëŠ¥) | ë¡œì»¬ í´ë” ì‹¤ì‹œê°„ ê°ì‹œ/í•™ìŠµ ë‚´ì¥ |
| **ì‚¬ìš©ì ê²½í—˜** | ChatGPTì™€ ìœ ì‚¬í•œ ë§¤ë„ëŸ¬ìš´ UI | ë…¸ì…˜(Notion)ì²˜ëŸ¼ ì§€ì‹ì„ ìŒ“ëŠ” êµ¬ì¡° |

---

## 3. ì‹¤ì‹œê°„ í´ë” ë™ê¸°í™” ë° ìë™í™”

Open WebUI UI ë‚´ì— "íŠ¹ì • í´ë” ìë™ ê°ì‹œ" ë²„íŠ¼ì€ ì—†ì§€ë§Œ, ê°•ë ¥í•œ **API**ë¥¼ í†µí•´ ë™ì¼í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

*   **API í™œìš©**: Python ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ "íŠ¹ì • í´ë”ì— ì‹ ê·œ íŒŒì¼ ìƒì„± ì‹œ Open WebUI ë¬¸ì„œí•¨ìœ¼ë¡œ ì—…ë¡œë“œ"í•˜ë„ë¡ ìë™í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
*   **Documents ë©”ë‰´**: ìˆ˜ë™ ì—…ë¡œë“œê°€ ë²ˆê±°ë¡­ë‹¤ë©´ 'Documents' ë©”ë‰´ì—ì„œ ê´€ë ¨ ë¬¸ì„œë¥¼ ë¯¸ë¦¬ ëŒ€ëŸ‰ìœ¼ë¡œ ì—…ë¡œë“œí•´ ë‘ê³  ìƒì‹œ ì°¸ì¡°í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 4. Open WebUI ì§€ì‹ ê´€ë¦¬ ë° ë°ì´í„° ì²­ì†Œ

RAG ì‹œìŠ¤í…œì˜ ì •í™•ë„ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ Open WebUIì—ì„œ ì œê³µí•˜ëŠ” ê´€ë¦¬ ê¸°ëŠ¥ì„ ì ê·¹ í™œìš©í•˜ì‹­ì‹œì˜¤.

### 1) 'ì»¬ë ‰ì…˜(Collections)'ì„ í†µí•œ ë°ì´í„° ê²©ë¦¬
Open WebUIì˜ 'Collection' ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ í”„ë¡œì íŠ¸ë³„ ë˜ëŠ” ì‹œì ë³„ë¡œ ì§€ì‹ì„ ê·¸ë£¹í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
*   **ì „ëµ**: 'Aí”„ë¡œì íŠ¸_ìµœì‹ ', 'Aí”„ë¡œì íŠ¸_ê³¼ê±°ê¸°ë¡'ìœ¼ë¡œ ì»¬ë ‰ì…˜ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤.
*   **í˜¸ì¶œ**: ì±„íŒ…ì°½ì—ì„œ `#`ì„ ëˆŒëŸ¬ **'ìµœì‹ ' ì»¬ë ‰ì…˜ë§Œ ì§€ì •**í•˜ì—¬ ë¶ˆëŸ¬ì˜¤ë©´ ëª¨ë¸ì´ ê³¼ê±° ë°ì´í„°ë¥¼ ì°¸ì¡°í•  ê°€ëŠ¥ì„±ì„ ì›ì²œ ì°¨ë‹¨í•©ë‹ˆë‹¤.

### 2) ë¬¸ì„œ ì—…ë°ì´íŠ¸ ì „ëµ: Re-upload
ê¸°ì¡´ ë¬¸ì„œë¥¼ ìˆ˜ì •í–ˆë‹¤ë©´ ë®ì–´ì“°ê¸°ë³´ë‹¤ëŠ” ì‚­ì œ í›„ ì¬ì—…ë¡œë“œë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.
*   **ë°©ë²•**: 'Documents' ë©”ë‰´ì—ì„œ ê³¼ê±° íŒŒì¼ì„ **Delete(ì‚­ì œ)**í•˜ê³ , ìˆ˜ì •ëœ ìµœì‹  íŒŒì¼ì„ ìƒˆë¡œ ì—…ë¡œë“œí•©ë‹ˆë‹¤.
*   **ì´ìœ **: ë²¡í„° DB íŠ¹ì„±ìƒ ë¬¼ë¦¬ì ìœ¼ë¡œ íŒŒì¼ì„ êµì²´í•˜ëŠ” ê²ƒì´ ì¸ë±ì‹± ì •í™•ë„ ì¸¡ë©´ì—ì„œ ê°€ì¥ ê¹”ë”í•©ë‹ˆë‹¤.

### 3) ê²€ìƒ‰ ì„ê³„ê°’(Score Threshold) ì„¤ì •
ê´€ë ¨ì„±ì´ ë‚®ì€ ì •ë³´ê°€ ë‹µë³€ì— ì„ì´ì§€ ì•Šë„ë¡ ì„¤ì •ê°’ì„ ì¡°ì ˆí•©ë‹ˆë‹¤.
*   **ì„¤ì •**: `Settings` -> `Documents` -> `Query Settings`ì—ì„œ **Score Threshold**ë¥¼ **0.5 ì´ìƒ**ìœ¼ë¡œ ìƒí–¥í•˜ì‹­ì‹œì˜¤.
*   **íš¨ê³¼**: ì§ˆë¬¸ê³¼ ê´€ë ¨ì„±ì´ ë–¨ì–´ì§€ëŠ” íŒŒí¸í™”ëœ ê³¼ê±° ì •ë³´ëŠ” ëª¨ë¸ì—ê²Œ ì „ë‹¬ë˜ì§€ ì•Šê³  ìë™ìœ¼ë¡œ í•„í„°ë§ë©ë‹ˆë‹¤.

### 4) Qwen ì „ìš© ìµœì í™” RAG í…œí”Œë¦¿
Qwen ëª¨ë¸ ì‚¬ìš© ì‹œ ë‹µë³€ì— í•œìê°€ ì„ì´ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ `Query Settings`ì˜ `RAG Template`ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ì‹­ì‹œì˜¤.

```markdown
### Task:
Respond to the user query using the provided context.

### Guidelines:
- If you don't know the answer, clearly state that.
- **IMPORTANT: Respond ONLY in Korean or English, depending on the user's language.**
- **STRICT RULE: DO NOT use Chinese characters (Hanja) under any circumstances. Use Hangul for all Korean text.**
- If the answer isn't present in the context but you possess the knowledge, explain this and provide the answer.
- Only include inline citations using [id] when the <source> tag includes an id attribute.
- Do not use XML tags in your response.

### Example of Citation:
"ì—°êµ¬ì— ë”°ë¥´ë©´ ì œì‹œëœ ë°©ë²•ì€ íš¨ìœ¨ì„±ì„ 20% í–¥ìƒì‹œí‚µë‹ˆë‹¤ [1]."

### Output:
Provide a clear response in pure Hangul or English.

<context>
{{CONTEXT}}
</context>
```

---

## 5. ì—ì´ì „ì‹œ ìš´ì˜ì„ ìœ„í•œ ìµœì¢… ì¶”ì²œ ì „ëµ

M4 Pro(64GB RAM ì´ìƒ) í™˜ê²½ì—ì„œ ì—ì´ì „ì‹œë¥¼ ìš´ì˜í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì„±ì„ ì¶”ì²œí•©ë‹ˆë‹¤.

1.  **Open WebUI (ë©”ì¸ ì»¨íŠ¸ë¡¤ íƒ€ì›Œ)**:
    *   Router, Coder, Reviewer ë“± ëª¨ë“  ì—ì´ì „íŠ¸ í˜ë¥´ì†Œë‚˜ë¥¼ ì—¬ê¸°ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.
    *   ì¼ë°˜ì ì¸ ì„¤ê³„ì„œ, ë¡œê·¸ íŒŒì¼ ë“±ì€ ì±„íŒ…ì°½ì— ë°”ë¡œ ë˜ì ¸ì„œ í•´ê²°í•˜ëŠ” ë°©ì‹ì´ ê°€ì¥ íš¨ìœ¨ì ì…ë‹ˆë‹¤.
2.  **AnythingLLM (ì§€ì‹ ì„œë²„ - ì„ íƒ ì‚¬í•­)**:
    *   ìˆ˜ì²œ ê°œì˜ ì†ŒìŠ¤ ì½”ë“œë‚˜ ë°©ëŒ€í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì „ì²´ë¥¼ ëª¨ë¸ì´ ìƒì‹œ ì™„ë²½í•˜ê²Œ ìˆ™ì§€í•´ì•¼ í•  ê²½ìš°ì—ë§Œ ë³´ì¡°ì ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
    *   ì¼ë°˜ì ì¸ ìš´ì˜ ìˆ˜ì¤€ì—ì„œëŠ” Open WebUIë§Œìœ¼ë¡œë„ ì¶©ë¶„íˆ ê°•ë ¥í•©ë‹ˆë‹¤.

---

## 6. ê²°ë¡  ë° ë‹¤ìŒ ë‹¨ê³„

Open WebUIë§Œìœ¼ë¡œë„ ì›¬ë§Œí•œ ë¡œì»¬ ë²¡í„° ì €ì¥ê³¼ RAG ê¸°ëŠ¥ì€ ì´ë¯¸ ê°–ì¶°ì ¸ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € Open WebUIì˜ RAG ê¸°ëŠ¥ì„ ì¶©ë¶„íˆ í™œìš©í•´ ë³´ì‹œê³ , íŠ¹ì • í´ë” ìë™ ë™ê¸°í™”ì™€ ê°™ì€ íŠ¹ìˆ˜ ê¸°ëŠ¥ì´ ì ˆì‹¤í•´ì§ˆ ë•Œ AnythingLLM ë„ì…ì„ ê³ ë ¤í•˜ì…”ë„ ì¶©ë¶„í•©ë‹ˆë‹¤.

> ğŸ’¡ **íŒ**: Open WebUIì—ì„œ `#` ê¸°í˜¸ë¥¼ í™œìš©í•´ ì—…ë¡œë“œí•œ ë¬¸ì„œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ë©´ ì‘ì—… ì†ë„ê°€ ë¹„ì•½ì ìœ¼ë¡œ í–¥ìƒë©ë‹ˆë‹¤.
